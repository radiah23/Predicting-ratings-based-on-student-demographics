---
title: "An Exploration of the Texas Education Agency 2022-2023 Accountability Ratings Dataset"
format: pdf
editor: visual
author: Radiah Khan, Mercer Mercer, Nafisa Mohamed, Catherine Weeks
---

Our data comes from the Texas Education Agency program, run by the state government, that tracks public school data across Texas. Within this, we will be using the 2025 Accountability System reports, which provide information on student achievement based on school and school district, considering a large number of variables.

Our research question is: Do schools with higher shares of economically disadvantaged students have lower overall scores? Our response variable will be the overall score, which represents a school's overall rating based on student achievement. Our explanatory variables will be percent economically disadvantaged, whether or not the school has earned distinction, and the academic growth score.

```{r}
library(readr)
School_Year_2022_2023_Statewide_Accountability_Ratings_20251119 <- read_csv("School_Year_2022-2023_Statewide_Accountability_Ratings_20251119.csv")
#View(School_Year_2022_2023_Statewide_Accountability_Ratings_20251119)
```

```{r}
library(janitor)
cleaned_name_school <- clean_names(School_Year_2022_2023_Statewide_Accountability_Ratings_20251119)
```
```{r}
colnames(cleaned_name_school)
```

```{r}
#Economically disadvantaged grouped by regions 
library(tidyverse)
data <-cleaned_name_school |>
  mutate(percent_economically_disadvantaged = 
           as.numeric(str_replace_all(percent_economically_disadvantaged, "[^0-9.]", "")))
```

```{r}
plot_economical_region <- data |>
 select(district , percent_economically_disadvantaged)|>
  group_by(district) |>
  summarise(avg_disadvantaged = mean(percent_economically_disadvantaged, na.rm = TRUE)) |>
  arrange((avg_disadvantaged))
plot_economical_region
```

```{r}
lowest_10_region <- plot_economical_region |> head(10)
```

# Plot 1

```{r}
#plotting the data 
ggplot(lowest_10_region, aes(x = reorder(district, avg_disadvantaged), 
                                   y = avg_disadvantaged, 
                                   fill = avg_disadvantaged)) +
  geom_col() +
  coord_flip() +
   scale_fill_gradient(
    low = "deepskyblue",   
    high = "springgreen3"  
  ) +
  labs(
    title = "Districts with the Lowest Average Economically Disadvantaged Student Demographic (Top 10)",
    x = "District",
    y = "Economically Disadvantaged (%)",
    fill = "Disadvantaged %"
  ) +
  theme_minimal() +
  theme(plot.title = element_text(hjust = 0.5, face = "bold"),
      panel.grid.major=  element_blank(),
      panel.grid.minor = element_blank())
      
```

The horizontal bar chart of the ten districts with the lowest average percent economically disadvantaged highlights a small group of districts and charter schools with very low concentrations of economically disadvantaged students. Brock ISD and Trivium Academy stand out at the top of this list, followed by Leadership Prep School and a mix of charter and small district programs; the x-axis values show these averages are near or below single-digit percentages. This pattern suggests these districts are outliers in the dataset, and because they are small or specialized (charter and specialty schools), their demographic profiles differ substantially from the statewide mix — an important caveat when comparing demographic measures to performance outcomes.

# Plot 2 `Overall\nRating`
```{r}
colnames(data)
```


```{r}
ggplot(data, aes(x = overall_rating, fill = overall_rating)) +
  geom_bar() +
  scale_fill_brewer(palette = "YlGnBu") + 
  theme_minimal() +
  labs(
    title = "Count of Districts by Rating Categories",
    x = "Rating Category",
    y = "Number of Districts",
    fill = "Overall Rating"
  )+
  theme_minimal() +
  theme(plot.title = element_text(hjust = 0.5, face = "bold"),
      panel.grid.major=  element_blank(),
      panel.grid.minor = element_blank())


```

The rating-distribution bar chart shows most districts receive mid-to-high ratings: B and C are the most common categories (with B the largest, followed by C and A), while D, F, and Not Rated are substantially less frequent. In other words, most districts fall into the mid-to-high rating range, creating a central peak with short tails at both the high and low ends. This shape means the distribution is clustered rather than widely spread, so many districts have similar overall ratings and only a minority sit at the extremes. Practically, that implies comparisons based on letter grades will group many districts together and finer distinctions will rely on the underlying numeric scores or other measures to separate performance within that large central mass.

# Plot 3 `Academic Growth Score`

```{r}
#Academic growth score and overall rating
data <- data |>
  mutate(
    academic_growth_score = as.numeric(str_replace_all(academic_growth_score, "[^0-9.]", "")),
    overall_score = as.numeric(str_replace_all(overall_score, "[^0-9.]", ""))
  )

ggplot(data, aes(x = academic_growth_score, y = overall_score)) +
  geom_point(position = "jitter", na.rm = TRUE) +
  theme_minimal() +
  labs(
    title = "Academic Growth and Overall Rating",
    x = "Academic Growth Score",
    y = "Overall Score"
  ) +
  #scale_x_continuous() +
  theme(
    plot.title = element_text(hjust = 0.5, face = "bold"),
  )
```

The scatterplot of Academic Growth Score versus Overall Score reveals a clear positive relationship: higher academic growth scores tend to accompany higher overall scores, with many schools clustered along an upward trend from roughly 50–60 overall at lower growth values to 85–100 overall at higher growth values. The spread is wider at lower growth levels and tighter near the top, suggesting a ceiling effect where very high growth scores correspond to consistently high overall scores; this reinforces that academic growth is an important predictor of overall performance, although variability at lower growth levels indicates other factors also influence overall score.


#Variables 

#Filtering it to 9-12 
```{r}
filtered_df <- data |>
  filter(grades_served == "09 - 12")
filtered_df
```
```{r}
filtered_df_pivoted <- filtered_df |>
  pivot_longer(
    cols = starts_with("distinction_"),
    values_to = "distinction_status",
    names_to  = "Distinction Type"
  ) 
filtered_df_pivoted
```


```{r}
colnames(filtered_df_pivoted)
```
```{r}
final_df <- filtered_df_pivoted |>
  group_by(campus, district) |>
  summarise(
    number_of_students = first(number_of_students), #to get the unique values
    academic_growth_score = first(academic_growth_score),
    percent_economically_disadvantaged = first(percent_economically_disadvantaged),
    overall_score = first(overall_score),
    school_progress_score = first(school_progress_score),
    distinction_score = sum(distinction_status  == "Earned", na.rm = TRUE),
    .groups = "drop"
  )
final_df

```

