---
title: ""
format: pdf
editor: visual
author: 
- Radiah Khan
- Mercer Mercer
- Nafisa Mohamed
- Catherine Weeks
---

```{r}
library(readr)
School_Year_2022_2023_Statewide_Accountability_Ratings_20251119 <- read_csv("School_Year_2022-2023_Statewide_Accountability_Ratings_20251119.csv")
#View(School_Year_2022_2023_Statewide_Accountability_Ratings_20251119)
```

```{r}
library(janitor)
cleaned_name_school <- clean_names(School_Year_2022_2023_Statewide_Accountability_Ratings_20251119)
```

```{r}
colnames(cleaned_name_school)
```

```{r}
#Economically disadvantaged grouped by regions 
library(tidyverse)
data <-cleaned_name_school |>
  mutate(percent_economically_disadvantaged = 
           as.numeric(str_replace_all(percent_economically_disadvantaged, "[^0-9.]", "")))
```

```{r}
plot_economical_region <- data |>
 select(district , percent_economically_disadvantaged)|>
  group_by(district) |>
  summarise(avg_disadvantaged = mean(percent_economically_disadvantaged, na.rm = TRUE)) |>
  arrange((avg_disadvantaged))
plot_economical_region
```

#Variables

#Filtering it to 9-12

```{r}
filtered_df <- data |>
  filter(grades_served == "09 - 12")
filtered_df
```

```{r}
filtered_df_pivoted <- filtered_df |>
  pivot_longer(
    cols = starts_with("distinction_"),
    values_to = "distinction_status",
    names_to  = "Distinction Type"
  ) 
filtered_df_pivoted
```

```{r}
colnames(filtered_df_pivoted)
```

```{r}
final_df <- filtered_df_pivoted |>
  group_by(campus, district) |>
  summarise(
    number_of_students = first(number_of_students), #to get the unique values
    academic_growth_score = first(academic_growth_score),
    percent_economically_disadvantaged = first(percent_economically_disadvantaged),
    overall_score = first(overall_score),
    school_progress_score = first(school_progress_score),
    distinction_score = sum(distinction_status  == "Earned", na.rm = TRUE),
    .groups = "drop"
  )
final_df

```
